<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mongoDB 数据库基本使用 | Jack 的博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="vue 教程">
    
    <link rel="preload" href="/blog/assets/css/0.styles.f40e0164.css" as="style"><link rel="preload" href="/blog/assets/js/app.f600d07b.js" as="script"><link rel="preload" href="/blog/assets/js/2.2efda491.js" as="script"><link rel="preload" href="/blog/assets/js/21.9c4ffbca.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.5759b5a6.js"><link rel="prefetch" href="/blog/assets/js/100.c11c94a0.js"><link rel="prefetch" href="/blog/assets/js/101.7e06bfc4.js"><link rel="prefetch" href="/blog/assets/js/102.cb80e24c.js"><link rel="prefetch" href="/blog/assets/js/103.9e50ef4d.js"><link rel="prefetch" href="/blog/assets/js/104.f367892d.js"><link rel="prefetch" href="/blog/assets/js/105.2533e8b9.js"><link rel="prefetch" href="/blog/assets/js/106.c75fd75e.js"><link rel="prefetch" href="/blog/assets/js/107.e85e7607.js"><link rel="prefetch" href="/blog/assets/js/108.37bf02c9.js"><link rel="prefetch" href="/blog/assets/js/109.e73f9d25.js"><link rel="prefetch" href="/blog/assets/js/11.db96e8cb.js"><link rel="prefetch" href="/blog/assets/js/110.bae650db.js"><link rel="prefetch" href="/blog/assets/js/111.b7182f59.js"><link rel="prefetch" href="/blog/assets/js/112.5ffa81c6.js"><link rel="prefetch" href="/blog/assets/js/113.d3bcacac.js"><link rel="prefetch" href="/blog/assets/js/114.ab5de741.js"><link rel="prefetch" href="/blog/assets/js/115.1504cff6.js"><link rel="prefetch" href="/blog/assets/js/116.65ce00ed.js"><link rel="prefetch" href="/blog/assets/js/117.775044e3.js"><link rel="prefetch" href="/blog/assets/js/118.4b6fa708.js"><link rel="prefetch" href="/blog/assets/js/119.6cf264d3.js"><link rel="prefetch" href="/blog/assets/js/12.7cf66971.js"><link rel="prefetch" href="/blog/assets/js/120.232630d7.js"><link rel="prefetch" href="/blog/assets/js/121.c945ae58.js"><link rel="prefetch" href="/blog/assets/js/122.47855d40.js"><link rel="prefetch" href="/blog/assets/js/123.237e1c10.js"><link rel="prefetch" href="/blog/assets/js/124.b7b86e27.js"><link rel="prefetch" href="/blog/assets/js/125.b26e3cf6.js"><link rel="prefetch" href="/blog/assets/js/126.63ac6d42.js"><link rel="prefetch" href="/blog/assets/js/127.e04913de.js"><link rel="prefetch" href="/blog/assets/js/128.0915a9dd.js"><link rel="prefetch" href="/blog/assets/js/129.f022d29b.js"><link rel="prefetch" href="/blog/assets/js/13.28979dcf.js"><link rel="prefetch" href="/blog/assets/js/130.740fc885.js"><link rel="prefetch" href="/blog/assets/js/131.8f3276f3.js"><link rel="prefetch" href="/blog/assets/js/132.891ae0b7.js"><link rel="prefetch" href="/blog/assets/js/133.34268944.js"><link rel="prefetch" href="/blog/assets/js/134.ef560a04.js"><link rel="prefetch" href="/blog/assets/js/135.4951f5e9.js"><link rel="prefetch" href="/blog/assets/js/136.24ef2c84.js"><link rel="prefetch" href="/blog/assets/js/137.e10dbb5c.js"><link rel="prefetch" href="/blog/assets/js/138.1da174d1.js"><link rel="prefetch" href="/blog/assets/js/139.1111468f.js"><link rel="prefetch" href="/blog/assets/js/14.73229591.js"><link rel="prefetch" href="/blog/assets/js/140.be162f64.js"><link rel="prefetch" href="/blog/assets/js/141.2fce3f92.js"><link rel="prefetch" href="/blog/assets/js/142.a41604d1.js"><link rel="prefetch" href="/blog/assets/js/143.f9d1aa4c.js"><link rel="prefetch" href="/blog/assets/js/144.ab226e1c.js"><link rel="prefetch" href="/blog/assets/js/145.6324972b.js"><link rel="prefetch" href="/blog/assets/js/146.86b94236.js"><link rel="prefetch" href="/blog/assets/js/147.3ed1819e.js"><link rel="prefetch" href="/blog/assets/js/148.e821ae82.js"><link rel="prefetch" href="/blog/assets/js/149.9a720c7e.js"><link rel="prefetch" href="/blog/assets/js/15.4f1e002e.js"><link rel="prefetch" href="/blog/assets/js/150.227aac9d.js"><link rel="prefetch" href="/blog/assets/js/151.37aa781a.js"><link rel="prefetch" href="/blog/assets/js/152.0a82015a.js"><link rel="prefetch" href="/blog/assets/js/153.238470cb.js"><link rel="prefetch" href="/blog/assets/js/154.78fe63ef.js"><link rel="prefetch" href="/blog/assets/js/155.7f5fba4a.js"><link rel="prefetch" href="/blog/assets/js/156.cd63d656.js"><link rel="prefetch" href="/blog/assets/js/157.576bc526.js"><link rel="prefetch" href="/blog/assets/js/158.e2e30983.js"><link rel="prefetch" href="/blog/assets/js/159.8fe06f36.js"><link rel="prefetch" href="/blog/assets/js/16.52685b60.js"><link rel="prefetch" href="/blog/assets/js/160.956e0c74.js"><link rel="prefetch" href="/blog/assets/js/161.22693bfe.js"><link rel="prefetch" href="/blog/assets/js/162.722bbc15.js"><link rel="prefetch" href="/blog/assets/js/163.f00c05f0.js"><link rel="prefetch" href="/blog/assets/js/164.80cf33ec.js"><link rel="prefetch" href="/blog/assets/js/17.86d1ee1c.js"><link rel="prefetch" href="/blog/assets/js/18.3005d22e.js"><link rel="prefetch" href="/blog/assets/js/19.217ec3f9.js"><link rel="prefetch" href="/blog/assets/js/20.f819104b.js"><link rel="prefetch" href="/blog/assets/js/22.0aea007b.js"><link rel="prefetch" href="/blog/assets/js/23.2eb06be8.js"><link rel="prefetch" href="/blog/assets/js/24.23dae9ca.js"><link rel="prefetch" href="/blog/assets/js/25.b70e20cb.js"><link rel="prefetch" href="/blog/assets/js/26.9a61c322.js"><link rel="prefetch" href="/blog/assets/js/27.ac5ed80b.js"><link rel="prefetch" href="/blog/assets/js/28.9114ae6c.js"><link rel="prefetch" href="/blog/assets/js/29.f8eab0e6.js"><link rel="prefetch" href="/blog/assets/js/3.6fec1244.js"><link rel="prefetch" href="/blog/assets/js/30.79b9fd10.js"><link rel="prefetch" href="/blog/assets/js/31.24f1d3e3.js"><link rel="prefetch" href="/blog/assets/js/32.cb8c8e14.js"><link rel="prefetch" href="/blog/assets/js/33.50564978.js"><link rel="prefetch" href="/blog/assets/js/34.93d14ef6.js"><link rel="prefetch" href="/blog/assets/js/35.9d1649ee.js"><link rel="prefetch" href="/blog/assets/js/36.9bc1f106.js"><link rel="prefetch" href="/blog/assets/js/37.84853c82.js"><link rel="prefetch" href="/blog/assets/js/38.9f600edf.js"><link rel="prefetch" href="/blog/assets/js/39.b47cb433.js"><link rel="prefetch" href="/blog/assets/js/4.ec0140bd.js"><link rel="prefetch" href="/blog/assets/js/40.9ccc0594.js"><link rel="prefetch" href="/blog/assets/js/41.01250879.js"><link rel="prefetch" href="/blog/assets/js/42.d60a39ea.js"><link rel="prefetch" href="/blog/assets/js/43.bb6abe12.js"><link rel="prefetch" href="/blog/assets/js/44.f1827278.js"><link rel="prefetch" href="/blog/assets/js/45.f3339292.js"><link rel="prefetch" href="/blog/assets/js/46.1c304a2b.js"><link rel="prefetch" href="/blog/assets/js/47.431a2b22.js"><link rel="prefetch" href="/blog/assets/js/48.ad234636.js"><link rel="prefetch" href="/blog/assets/js/49.67ad5b83.js"><link rel="prefetch" href="/blog/assets/js/5.3ec83be7.js"><link rel="prefetch" href="/blog/assets/js/50.b0733796.js"><link rel="prefetch" href="/blog/assets/js/51.c86649b3.js"><link rel="prefetch" href="/blog/assets/js/52.e2228f69.js"><link rel="prefetch" href="/blog/assets/js/53.8e49c1f4.js"><link rel="prefetch" href="/blog/assets/js/54.5542fcf9.js"><link rel="prefetch" href="/blog/assets/js/55.bf4d78dd.js"><link rel="prefetch" href="/blog/assets/js/56.ac5dd9d6.js"><link rel="prefetch" href="/blog/assets/js/57.b9a9c4a2.js"><link rel="prefetch" href="/blog/assets/js/58.f8dfabd2.js"><link rel="prefetch" href="/blog/assets/js/59.ef9edf8c.js"><link rel="prefetch" href="/blog/assets/js/6.a48d7718.js"><link rel="prefetch" href="/blog/assets/js/60.6ac72368.js"><link rel="prefetch" href="/blog/assets/js/61.46bc7de5.js"><link rel="prefetch" href="/blog/assets/js/62.b9fa4071.js"><link rel="prefetch" href="/blog/assets/js/63.ef4370f5.js"><link rel="prefetch" href="/blog/assets/js/64.a436c5be.js"><link rel="prefetch" href="/blog/assets/js/65.fb4bf376.js"><link rel="prefetch" href="/blog/assets/js/66.bad0cffd.js"><link rel="prefetch" href="/blog/assets/js/67.29b8bb71.js"><link rel="prefetch" href="/blog/assets/js/68.b7ae577e.js"><link rel="prefetch" href="/blog/assets/js/69.5a855c9d.js"><link rel="prefetch" href="/blog/assets/js/7.e84e9cdf.js"><link rel="prefetch" href="/blog/assets/js/70.df9ab8df.js"><link rel="prefetch" href="/blog/assets/js/71.9328d7e2.js"><link rel="prefetch" href="/blog/assets/js/72.3580533a.js"><link rel="prefetch" href="/blog/assets/js/73.16ba35eb.js"><link rel="prefetch" href="/blog/assets/js/74.2d0d9b5b.js"><link rel="prefetch" href="/blog/assets/js/75.09e10dbd.js"><link rel="prefetch" href="/blog/assets/js/76.56e0338c.js"><link rel="prefetch" href="/blog/assets/js/77.a99acafc.js"><link rel="prefetch" href="/blog/assets/js/78.17d1d404.js"><link rel="prefetch" href="/blog/assets/js/79.50ed2296.js"><link rel="prefetch" href="/blog/assets/js/8.d6346ba1.js"><link rel="prefetch" href="/blog/assets/js/80.6d76cbea.js"><link rel="prefetch" href="/blog/assets/js/81.7a8a8125.js"><link rel="prefetch" href="/blog/assets/js/82.ab110344.js"><link rel="prefetch" href="/blog/assets/js/83.534159b7.js"><link rel="prefetch" href="/blog/assets/js/84.1cacb036.js"><link rel="prefetch" href="/blog/assets/js/85.6ea1a18c.js"><link rel="prefetch" href="/blog/assets/js/86.45d2d704.js"><link rel="prefetch" href="/blog/assets/js/87.397bf3ec.js"><link rel="prefetch" href="/blog/assets/js/88.a3ac0d51.js"><link rel="prefetch" href="/blog/assets/js/89.181ef1b6.js"><link rel="prefetch" href="/blog/assets/js/9.10eb84ee.js"><link rel="prefetch" href="/blog/assets/js/90.cf532ce7.js"><link rel="prefetch" href="/blog/assets/js/91.6a34527e.js"><link rel="prefetch" href="/blog/assets/js/92.64450dbe.js"><link rel="prefetch" href="/blog/assets/js/93.d99dd7ba.js"><link rel="prefetch" href="/blog/assets/js/94.6300a04e.js"><link rel="prefetch" href="/blog/assets/js/95.74437fc5.js"><link rel="prefetch" href="/blog/assets/js/96.726f109c.js"><link rel="prefetch" href="/blog/assets/js/97.d9b26abd.js"><link rel="prefetch" href="/blog/assets/js/98.7c6a019e.js"><link rel="prefetch" href="/blog/assets/js/99.1e91aa55.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.f40e0164.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Jack 的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/blog/vue2/" class="nav-link">
  vue2
</a></div><div class="nav-item"><a href="/blog/vue3/" class="nav-link">
  vue3
</a></div><div class="nav-item"><a href="/blog/react/" class="nav-link">
  react
</a></div><div class="nav-item"><a href="/blog/node/" class="nav-link router-link-active">
  node
</a></div><div class="nav-item"><a href="/blog/science/" class="nav-link">
  科学
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="web" class="dropdown-title"><span class="title">web</span> <span class="arrow down"></span></button> <button type="button" aria-label="web" class="mobile-dropdown-title"><span class="title">web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/web/js/" class="nav-link">
  js
</a></li><li class="dropdown-item"><!----> <a href="/blog/webpack/" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/others/functional-programming/" class="nav-link">
  函数式编程
</a></li><li class="dropdown-item"><!----> <a href="/blog/angular/" class="nav-link">
  angular
</a></li><li class="dropdown-item"><!----> <a href="/blog/others/dev-tool/" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/blog/others/mac/" class="nav-link">
  mac使用
</a></li></ul></div></div> <a href="https://github.com/jackchoumine/vue-press-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/blog/vue2/" class="nav-link">
  vue2
</a></div><div class="nav-item"><a href="/blog/vue3/" class="nav-link">
  vue3
</a></div><div class="nav-item"><a href="/blog/react/" class="nav-link">
  react
</a></div><div class="nav-item"><a href="/blog/node/" class="nav-link router-link-active">
  node
</a></div><div class="nav-item"><a href="/blog/science/" class="nav-link">
  科学
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="web" class="dropdown-title"><span class="title">web</span> <span class="arrow down"></span></button> <button type="button" aria-label="web" class="mobile-dropdown-title"><span class="title">web</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/web/js/" class="nav-link">
  js
</a></li><li class="dropdown-item"><!----> <a href="/blog/webpack/" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/others/functional-programming/" class="nav-link">
  函数式编程
</a></li><li class="dropdown-item"><!----> <a href="/blog/angular/" class="nav-link">
  angular
</a></li><li class="dropdown-item"><!----> <a href="/blog/others/dev-tool/" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/blog/others/mac/" class="nav-link">
  mac使用
</a></li></ul></div></div> <a href="https://github.com/jackchoumine/vue-press-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>mongoDB 数据库基本使用</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/node/mongoDB%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8.html#安装配置数据库" class="sidebar-link">安装配置数据库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/node/mongoDB%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8.html#mongodb-支持的数据类型" class="sidebar-link">MongoDB 支持的数据类型</a></li><li class="sidebar-sub-header"><a href="/blog/node/mongoDB%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8.html#常见数据库操作" class="sidebar-link">常见数据库操作</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mongodb-数据库基本使用"><a href="#mongodb-数据库基本使用" class="header-anchor">#</a> mongoDB 数据库基本使用</h1> <h2 id="安装配置数据库"><a href="#安装配置数据库" class="header-anchor">#</a> 安装配置数据库</h2> <p>在 D 盘创建一个文件夹安装：D:\Mongo
安装完成后，在 D:\Mongo 会看到一个 bin 目录和一些其他文件。
创建工作目录：
在 D:\mongodb 中创建数据库存放目录:data,日志目录:log\log.txt 。</p> <p>加入系统变量：
将\bin 加入系统环境变量。完整的目录是 D:\Mongo\bin; 注意分号。</p> <p><strong>注册 mongodb 为 window 服务：</strong>
先移除服务：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token constant">D</span><span class="token operator">:</span>\Mongo\bin
λ mongod <span class="token operator">--</span>remove <span class="token comment">// 我不确定上次注册成功没，干脆删除再来一次，结果显示没注册成功</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2018-07-21T23:49:50.784+0800 I CONTROL [main] Trying to remove Windows service
'MongoDB'
2018-07-21T23:49:50.785+0800 I CONTROL [main] Could not find a service named 'M
ongoDB' to remove</p> <p><strong>注册服务：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token constant">D</span><span class="token operator">:</span>\Mongo\bin
λ mongod <span class="token operator">--</span>dbpath<span class="token operator">=</span><span class="token constant">D</span><span class="token operator">:</span>\mongodb\data <span class="token operator">--</span>logpath<span class="token operator">=</span><span class="token constant">D</span><span class="token operator">:</span>\mongodb\log\log<span class="token punctuation">.</span>txt <span class="token operator">--</span>install
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>启动 mongodb</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token constant">D</span><span class="token operator">:</span>\Mongo\bin # 在任何目录下都可执行该命令
λ net start mongodb
MongoDB 服务正在启动 <span class="token punctuation">.</span><span class="token punctuation">.</span>
MongoDB 服务已经启动成功。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>看上面的提示，说明启动成功。可用 mongodb 管理工具连接了，我用 Robo 3T 1.1.1，连接成功。</p> <ul><li>D:\Mongo\bin
λ net start MongoDB
MongoDB 服务正在启动 .
MongoDB 服务无法启动。
发生服务特定错误: 48.
请键入 NET HELPMSG 3547 以获得更多的帮助。
出现以上结果，可能停止刚才启动的 mongoDB，在任务管理器里结束进程，重新启动就好。</li></ul> <p><strong>停止服务：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token constant">D</span><span class="token operator">:</span>\Mongo
λ net stop MongoDB
MongoDB 服务正在停止<span class="token punctuation">.</span>
MongoDB 服务已成功停止。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>参考：<a href="https://stackoverflow.com/questions/2438055/how-to-run-mongodb-as-windows-service" target="_blank" rel="noopener noreferrer">将 mongodb 注册为 window 服务<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>##用 mongoDB Shell 管理数据库
<strong>进入操作界面：</strong>
在 bin 目录下，执行下面脚本：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token constant">D</span><span class="token operator">:</span>\Mongo\bin
λ mongo
MongoDB shell version v3<span class="token punctuation">.</span><span class="token number">4.16</span><span class="token operator">-</span><span class="token number">13</span><span class="token operator">-</span>gc253cad0df
connecting to<span class="token operator">:</span> mongodb<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">27017</span>
MongoDB server version<span class="token operator">:</span> <span class="token number">3.4</span><span class="token number">.16</span><span class="token operator">-</span><span class="token number">13</span><span class="token operator">-</span>gc253cad0df
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>看到包含以上信息，说明成功了，MONGO 大写也可以，现在可操作数据库了，用于 MongoDB Shell 是 js 脚本。</p> <p><strong>当前正在操作的数据库：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> db
test
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>MongoDB 默认操作 test 数据库</p> <p><strong>查看数据库列表：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> show dbs
admin        <span class="token number">0</span><span class="token punctuation">.</span>000GB
local        <span class="token number">0</span><span class="token punctuation">.</span>000GB
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>*注意</strong>，没有数据表的数据库，不会显示出来*</p> <p><strong>use DataBaseName，切换或者创建数据库：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> use bstable_test
switched to db bstable_test
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>已经存在该数据库，切换；不存在该数据库，创建一个。</p> <p><strong>创建集合：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>db<span class="token punctuation">.</span><span class="token function">createCollection</span><span class="token punctuation">(</span>collection_name<span class="token punctuation">[</span><span class="token punctuation">,</span>options<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可选参数 options 指定几个集合属性，options 类似 JS 对象。
{
capped:false,//默认 false,指定是否为 规定集合，当为 true 时，需要设置 size
size:number,//正整数，指定集合的存储空间大小，单位字节
max:number,//正整数，指定集合能存储的文档数上限
autoIndexId:false//是否指定集合索引为 _id ,默认 false
}
当在一个固定集合中插入文档时，先检查 size 是否超出设定，再检查 max 是否超出。
创建一个固定集合：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span><span class="token function">createCollection</span><span class="token punctuation">(</span><span class="token string">&quot;capped_col&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">capped</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token literal-property property">size</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;ok&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>删除集合：db.collection_name.drop()</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>capped_col<span class="token punctuation">.</span><span class="token function">drop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token boolean">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>返回 true，删除成功。false，删除失败，可能该集合不存在或者其他原因</p> <h3 id="mongodb-支持的数据类型"><a href="#mongodb-支持的数据类型" class="header-anchor">#</a> MongoDB 支持的数据类型</h3> <ul><li>Sring:字符串，必须用 UTF-8 UTF-16？</li> <li>Intger:数值，32 位或者 64 位，有计算机决定</li> <li>Boolean:布尔值</li> <li>Double:浮点数</li> <li>Min/Max keys:将一个值与 BSON（二进制的 JSON）元素的最低值和最高值相对比。</li> <li>Array:数组、列表或者多个值存储在一个键中；</li> <li>Timestamp:时间戳，记录文档的变化，时间戳是什么数据类型，什么格式的？</li> <li>Object:对象，内嵌文档；</li> <li>Null:空值；</li> <li>Date:日期，可指定；</li> <li>Object ID:文档 ID; 4+3+2+3（时间戳+机器 ID+处理 ID+增量）</li> <li>Binary Data:二进制数据；</li> <li>Code:js 代码；</li> <li>Regular Expression:正则。</li></ul> <h3 id="常见数据库操作"><a href="#常见数据库操作" class="header-anchor">#</a> 常见数据库操作</h3> <p>增删改查也可以用 MongoDB Shell 完成。</p> <h4 id="插入数据"><a href="#插入数据" class="header-anchor">#</a> 插入数据</h4> <p><strong>db.CollectionName.insert(JSONdata)</strong>
集合(数据表)，会创建一个,是一个非固定集合(普通集合)，然后插入一条数据；存在则直接插入。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable_test<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Jack&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nInserted&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;a&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;b&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">BulkWriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string-property property">&quot;writeErrors&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;writeConcernErrors&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;nInserted&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;nUpserted&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;nMatched&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;nModified&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;nRemoved&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;upserted&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>&gt; db.bstable.insertMany([{&quot;a&quot;: 3},{&quot;b&quot;:3}])
{
        &quot;acknowledged&quot; : true,
        &quot;insertedIds&quot; : [
                ObjectId(&quot;5b538f94fb2f3a5a1e04456b&quot;),
                ObjectId(&quot;5b538f94fb2f3a5a1e04456c&quot;)
        ]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b538fbffb2f3a5a1e044568&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string-property property">&quot;a&quot;</span><span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nInserted&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b538fbffb2f3a5a1e044568&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string-property property">&quot;a&quot;</span><span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string-property property">&quot;nInserted&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;writeError&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;code&quot;</span> <span class="token operator">:</span> <span class="token number">11000</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;errmsg&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;E11000 duplicate key error collection: bstable_test.bstable index: _id_ dup key: { : ObjectId('5b538fbffb2f3a5a1e044568') }&quot;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//插入失败了，已经处在id。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>save：有则修改，无则插入</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b538fbffb2f3a5a1e04456d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string-property property">&quot;a&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nMatched&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;nUpserted&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;nModified&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//匹配了一个文档，修改一个文档；</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b538fbffb2f3a5a1e044565&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string-property property">&quot;a&quot;</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string-property property">&quot;nMatched&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;nUpserted&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;nModified&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b538fbffb2f3a5a1e044565&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//没有找到匹配的文档，插入一个文档</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;a&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nInserted&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//不指定ID,和 insert 操作一样</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="删除文档"><a href="#删除文档" class="header-anchor">#</a> 删除文档：</h4> <p><strong>db.collection_name.remove(deletion_critteria)</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt; db.bstable.remove({a:10})
WriteResult({ &quot;nRemoved&quot; : 2 })
//删除 a 为 10 的两条数据
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>remove({a:10},1) 删除匹配的一条数据
remove()，删除所有数据</p> <h4 id="修改文档"><a href="#修改文档" class="header-anchor">#</a> 修改文档</h4> <p><strong>db.collection_name.update(selection_critteria,update_data)</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">&quot;10&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nMatched&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;nUpserted&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;nModified&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">&quot;10&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">&quot;jack&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">multi</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">WriteResult</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;nMatched&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;nUpserted&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;nModified&quot;</span> <span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="查询数据库"><a href="#查询数据库" class="header-anchor">#</a> 查询数据库</h4> <p><strong>db.collection_name.find([query][,projection])</strong></p> <ul><li>projection:指定返回的键</li> <li>db.bstable.find([query]).pretty()将结果格式化输出</li></ul> <p>db.bstable.findOne() 不能添加条件，返回第一条件数据
query 是查询条件，不设置查询条件，返回所有数据。</p> <ul><li>等于—— {key:value}</li> <li>不等于——{key:{$ne:value}</li> <li>小于——{key:{$lt:value}}</li> <li>小于等于——{key:{$lte:value}}</li> <li>大于——{key:{$gt:value}}</li> <li>大于等于——{key:{$gte:value}}</li> <li>且—— {key1:{$gte:value1},key2:value2} 键不能相同 ——满足 key1 值大于等于 value1 且 key2 值为 value2 的文档。</li> <li>或——{ $or: [{key1: { $gte:value1}},{key3:value3}]} 键可相同</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$or</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">&quot;jack&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b538fbffb2f3a5a1e044568&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;a&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b539a52fb2f3a5a1e044570&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;a&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b539a6afb2f3a5a1e044571&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;a&quot;</span> <span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span>
        <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b539c12fb2f3a5a1e044572&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;a&quot;</span> <span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;afafafaafafafagagagagagag&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;money&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token number">100</span><span class="token punctuation">,</span>
                <span class="token number">20</span>
        <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b53a063fb2f3a5a1e044573&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;a&quot;</span> <span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;c&quot;</span> <span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>projection：</strong>
指定返回的键，_id 是默认隐藏的
inclusion 模式:指定返回的键，不返回其他键
db.collection.find(query, {title: 1, by: 1})
exclusion 模式:排除 title 和 by 键值，返回其他键
db.collection.find(query, {title: 0, by: 0})
两种模式不能混用：
db.collection.find(query, {title: 0, by: 1})
若不想指定查询条件参数 query 可以 用 {} 代替，但是需要指定 projection 参数：
querydb.collection.find({}, {title: 1})</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>$type 操作——基于键值类型查询数据
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">$type</span><span class="token operator">:</span> 类型数值
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Double 1
String 2
Object 3
Array 4
Binary data 5
Object id 7
Boolean 8
Date 9
Null 10
Regular Expression 11
js 13
Symbol 14
js (with scope) 15
32-bit integer 16
Timestamp 17
64-bit integer 18
Min key 255 Query with -1.
Max key 127</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//查询键 a 的值是 字符串的文档：
&gt; db.bstable.find({a:{$type:2}})
{ &quot;_id&quot; : ObjectId(&quot;5b538fbffb2f3a5a1e044568&quot;), &quot;a&quot; : &quot;jack&quot; }
{ &quot;_id&quot; : ObjectId(&quot;5b539a52fb2f3a5a1e044570&quot;), &quot;a&quot; : &quot;jack&quot; }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Limit</span><span class="token punctuation">(</span><span class="token constant">NUM</span><span class="token punctuation">)</span><span class="token function">和Skip</span><span class="token punctuation">(</span><span class="token constant">NUM</span><span class="token punctuation">)</span>——指定返回的文档数和跳过多少文档
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$type</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b538fbffb2f3a5a1e04456d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;a&quot;</span> <span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$type</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b538fbffb2f3a5a1e04456d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;a&quot;</span> <span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="排序"><a href="#排序" class="header-anchor">#</a> 排序</h4> <p><strong>db.collection_name.find().sort({key:1})</strong> 结果按照字段 key 的值升序
-1 为降序 默认升序
<em>指定多个字段排序呢？</em>
.sort(fields) Order by the given fields. There are several equivalent syntaxes:
.sort({field1: -1, field2: 1}) descending by field1, then ascending by field2.
.sort([['field1', 'desc'], ['field2', 'asc']]) same as above
.sort([['field1', 'desc'], 'field2']) same as above
.sort('field1') ascending by field1</p> <h4 id="聚合操作"><a href="#聚合操作" class="header-anchor">#</a> 聚合操作</h4> <p><code>美元符号不能在 markdown 中显示，用人民币符号（¥）代替。</code>
主要用于处理数据(求均值、求和等)，并返回计算后的结果。
<strong>db.collection_name.aggregate(aggregate_options)</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//按照 $by_user 字段将文档分组</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">$group</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">_id</span> <span class="token operator">:</span> <span class="token string">&quot;$by_user&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;runoob.com&quot;</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>//统计每个作者写文档的数量：通过by_user字段进行分组，并计算by_user字段值相同的总和
&gt; db.bstable.aggregate([{$group:{_id:'$by_user',num_tutorial:{$sum:1}}}])
{ &quot;_id&quot; : &quot;Neo4j&quot;, &quot;num_tutorial&quot; : 1 }
{ &quot;_id&quot; : &quot;runoob.com&quot;, &quot;num_tutorial&quot; : 2 }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="¥-sum-计算总和"><a href="#¥-sum-计算总和" class="header-anchor">#</a> ￥ sum 计算总和</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt; db.bstable.aggregate([{$group:{_id:'$by_user',num_likes:{$sum:'$likes'}}}])
{ &quot;_id&quot; : &quot;Neo4j&quot;, &quot;num_likes&quot; : 750 }
{ &quot;_id&quot; : &quot;runoob.com&quot;, &quot;num_likes&quot; : 110 }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="¥-avg-计算均值"><a href="#¥-avg-计算均值" class="header-anchor">#</a> ￥ avg 计算均值</h5> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//[{$group:{_id:'by_user',num_avg:{$avg:'$likes'}}}] 计算平均每个作者的喜欢数</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">$group</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token string">'by_user'</span><span class="token punctuation">,</span><span class="token literal-property property">num_avg</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$avg</span><span class="token operator">:</span><span class="token string">'$likes'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;by_user&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;num_avg&quot;</span> <span class="token operator">:</span> <span class="token number">218.33333333333334</span> <span class="token punctuation">}</span> <span class="token number">860</span><span class="token operator">/</span><span class="token number">3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="¥-addtoset-在结果文档中插入值到一个数组中-但不创建副本。"><a href="#¥-addtoset-在结果文档中插入值到一个数组中-但不创建副本。" class="header-anchor">#</a> ￥ addToSet 在结果文档中插入值到一个数组中，但不创建副本。</h5> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">$group</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">_id</span> <span class="token operator">:</span> <span class="token string">&quot;$by_user&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">url</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">$addToSet</span><span class="token operator">:</span> <span class="token string">&quot;$url&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;url&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;http://www.neo4j.com&quot;</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;runoob.com&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;url&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;http://www.runoob.com&quot;</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="¥-first-¥-last-根据资源文档的排序-获取第一个-最后一个-数据"><a href="#¥-first-¥-last-根据资源文档的排序-获取第一个-最后一个-数据" class="header-anchor">#</a> ￥ first/￥ last 根据资源文档的排序 获取第一个/最后一个 数据</h5> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">$group</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">_id</span> <span class="token operator">:</span> <span class="token string">&quot;$by_user&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">url</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">$first</span><span class="token operator">:</span> <span class="token string">&quot;$url&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;url&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;http://www.neo4j.com&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;runoob.com&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;url&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;http://www.runoob.com&quot;</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="管道操作"><a href="#管道操作" class="header-anchor">#</a> 管道操作</h4> <p>管道：在 Unix 和 Linux 中，将当前命令的结果作为下一个命令的参数。
MongoDB 管道是将一个管道的处理结果传递给下一个管道处理。
$project:修改文档的结构。可用来重命名、增加或删除，也可以用于计算结果或嵌套文档。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span><span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">by_user</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b5439d393c60fa5fc8dfad7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;MongoDB Overview&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;by_user&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;runoob.com&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b5439d393c60fa5fc8dfad8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;NoSQL Overview&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;by_user&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;runoob.com&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b5439d393c60fa5fc8dfad9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j Overview&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;by_user&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j&quot;</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>不想包含 _id：
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span><span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">by_user</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;MongoDB Overview&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;by_user&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;runoob.com&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;NoSQL Overview&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;by_user&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;runoob.com&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string-property property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j Overview&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;by_user&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j&quot;</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//查找 score 值在 65 到 90 之间的文档。和 db.bstable.find({score:{$gt:65,$lt:90}}).pretty() 一样</span>
<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>bstable<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">$match</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">score</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$gt</span> <span class="token operator">:</span> <span class="token number">65</span><span class="token punctuation">,</span> <span class="token literal-property property">$lte</span> <span class="token operator">:</span> <span class="token number">90</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b5439d393c60fa5fc8dfad7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;MongoDB Overview&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;description&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;MongoDB is no sql database&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;by_user&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;runoob.com&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;url&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;http://www.runoob.com&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;tags&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;mongodb&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;database&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;NoSQL&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;likes&quot;</span> <span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;score&quot;</span> <span class="token operator">:</span> <span class="token number">78</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
        <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b5439d393c60fa5fc8dfad8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;NoSQL Overview&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;description&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;No sql database is very fast&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;by_user&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;runoob.com&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;url&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;http://www.runoob.com&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;tags&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;mongodb&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;database&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;NoSQL&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;likes&quot;</span> <span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;score&quot;</span> <span class="token operator">:</span> <span class="token number">70</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
        <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b544937760a99abf8e5356d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j Overview&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;description&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j is no sql database&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;by_user&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;url&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;http://www.neo4j.com&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;tags&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;database&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;NoSQL&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;likes&quot;</span> <span class="token operator">:</span> <span class="token number">550</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;score&quot;</span> <span class="token operator">:</span> <span class="token number">74</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
        <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b544940760a99abf8e5356f&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j Overview&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;description&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j is no sql database&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;by_user&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;url&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;http://www.neo4j.com&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;tags&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;database&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;NoSQL&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;likes&quot;</span> <span class="token operator">:</span> <span class="token number">650</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;score&quot;</span> <span class="token operator">:</span> <span class="token number">68</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
        <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b54494d760a99abf8e53573&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j Overview&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;description&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j is no sql database&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;by_user&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;url&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;http://www.neo4j.com&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;tags&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;database&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;NoSQL&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;likes&quot;</span> <span class="token operator">:</span> <span class="token number">450</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;score&quot;</span> <span class="token operator">:</span> <span class="token number">69</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
        <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b544961760a99abf8e53577&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j Overview&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;description&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j is no sql database&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;by_user&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;url&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;http://www.neo4j.com&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;tags&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;database&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;NoSQL&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;likes&quot;</span> <span class="token operator">:</span> <span class="token number">650</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;score&quot;</span> <span class="token operator">:</span> <span class="token number">85</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
        <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5b54496b760a99abf8e53579&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j Overview&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;description&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j is no sql database&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;by_user&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Neo4j&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;url&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;http://www.neo4j.com&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;tags&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;database&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;NoSQL&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;likes&quot;</span> <span class="token operator">:</span> <span class="token number">650</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;score&quot;</span> <span class="token operator">:</span> <span class="token number">66</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><div></div></div></div>
    <script src="/blog/assets/js/app.f600d07b.js" defer></script><script src="/blog/assets/js/2.2efda491.js" defer></script><script src="/blog/assets/js/21.9c4ffbca.js" defer></script>
  </body>
</html>
