(window.webpackJsonp=window.webpackJsonp||[]).push([[154],{431:function(t,s,a){"use strict";a.r(s);var n=a(10),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"stencil-简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stencil-简介"}},[t._v("#")]),t._v(" stencil 简介")]),t._v(" "),s("p",[t._v("stencil 是一个生成 "),s("strong",[t._v("Web Component")]),t._v(" 的"),s("strong",[t._v("编译器")]),t._v("，但是其具有自己的特殊语法，使用 stencil 生成的组件可"),s("strong",[t._v("跨框架")]),t._v("和"),s("strong",[t._v("在 html 中使用")]),t._v("。")]),t._v(" "),s("p",[t._v("其号称结合了最流行框架(angular、react、vue)中的最好的理念，具备这些特点：")]),t._v(" "),s("ul",[s("li",[t._v("TypeScript (依赖注入、装饰器等 angular 的一些语法)")]),t._v(" "),s("li",[t._v("Virtual DOM (React)")]),t._v(" "),s("li",[t._v("JSX (React)")]),t._v(" "),s("li",[t._v("Reactive data-binding (React)")]),t._v(" "),s("li",[t._v("Async rendering (React)")]),t._v(" "),s("li",[t._v("Static Site generation (SSG)")]),t._v(" "),s("li",[t._v("Live reload 热刷新，开发时很有用")]),t._v(" "),s("li",[t._v("自动优化构建产物")]),t._v(" "),s("li",[t._v("API 很小")])]),t._v(" "),s("p",[t._v("stencil 的构建产物已经做了"),s("strong",[t._v("懒加载")]),t._v("和"),s("strong",[t._v("按需加载")]),t._v("，所以具有"),s("strong",[t._v("较高的性能")]),t._v("。")]),t._v(" "),s("p",[t._v("stencil 除了创建 Web Component，还能构建 WPA 的站点。")]),t._v(" "),s("p",[t._v("一个简单的 stencil 组件：")]),t._v(" "),s("div",{staticClass:"language-tsx line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-tsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Prop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" h "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@stencil/core'")]),t._v("\n\n@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  tag"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  styleUrl"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-name.scss'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyName")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  @"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Prop")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" first"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n  @"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Prop")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" last"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        Hello, my name is ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("first"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v(" ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("last"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("p",[t._v("使用：")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("my-name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("first")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Stencil"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("last")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("JS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("my-name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"stencil-出现的动机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stencil-出现的动机"}},[t._v("#")]),t._v(" stencil 出现的动机")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://ionicframework.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ionic 团队"),s("OutboundLink")],1),t._v("为了实现更好的创建 component，且 component 能跨框架和无框架使用，开发了 stencil，2017 年 8 月发布第一个版本。")]),t._v(" "),s("blockquote",[s("p",[t._v("Stencil's primary goal is to remove the need for components to be written using a specific framework's API.")])]),t._v(" "),s("blockquote",[s("p",[t._v("Stencil's integration with different frameworks is currently a work "),s("strong",[t._v("in progress")]),t._v(". As Stencil matures, the goal is to make it easy to write standard web components which will compile to various output targets.")])]),t._v(" "),s("blockquote",[s("p",[t._v("实际使用时，发现三大流行框架（react、vue angular）对 stencil 生成的 web component 的支持并没有和其宣传的那么好，坑比较多，集成方案很少。")])]),t._v(" "),s("blockquote",[s("p",[t._v("本人测试 react17、vue2、vue3 之后，发现 vue2 对 stencil 的支持最好，配置最简单。")])]),t._v(" "),s("p",[t._v("实际上，网站关于 stencil 的资料非常少，stackoverflow 上 stencil 相关的问题才 4588 条，vue 相关的 11 万加，react 和 angular 更多了。")]),t._v(" "),s("blockquote",[s("p",[t._v("另外，stencil 相关文档和周边库、组件等也"),s("strong",[t._v("很少")]),t._v("，想采用它来编写跨裤架的 web component，还是不推荐。")])]),t._v(" "),s("blockquote",[s("p",[t._v("那在纯 html 中使用 stencil 构建的 web component 呢？")])]),t._v(" "),s("p",[s("strong",[t._v("不推荐")]),t._v("。比如支持传递 object 和 array 等复杂数据到 web component 内部，还需要配合 jquery 等 DOM 操作库，让前端开发回到 jquery 时代。")]),t._v(" "),s("blockquote",[s("p",[t._v("单独使用 stencil 创建"),s("strong",[t._v("单页应用")]),t._v("可以吗？")])]),t._v(" "),s("p",[t._v("可行，不推荐。")]),t._v(" "),s("p",[t._v("周边库支持不好，文档糟糕，社区不活跃，遇到问题，难以找到解决方案。")]),t._v(" "),s("blockquote",[s("p",[t._v("什么时候需要使用 stencil?")])]),t._v(" "),s("p",[t._v("使用 ionic 技术开发 ios、android 应用，可以学习它。")]),t._v(" "),s("h2",{attrs:{id:"为何要学习-stencil-呢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为何要学习-stencil-呢"}},[t._v("#")]),t._v(" 为何要学习 stencil 呢？")]),t._v(" "),s("p",[t._v("入职新公司采用 stencil 开发，需要适应新技术，老项目还有其他问题，我们也计划采用新的技术重构这个维护了 4 年多的系统，所以有必要了解 stencil。")])])}),[],!1,null,null,null);s.default=e.exports}}]);