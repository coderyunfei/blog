(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{310:function(t,s,e){"use strict";e.r(s);var n=e(10),a=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"node-学习笔记-events-模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node-学习笔记-events-模块"}},[t._v("#")]),t._v(" node 学习笔记 --- events 模块")]),t._v(" "),s("p",[t._v("events 模块只提供了一个对象：events.EventEmitter，是事件发射和事件监听器的封装。"),s("code",[t._v("EventEmitter")]),t._v(" 的每个事件由一个事件名和若干"),s("strong",[t._v("参数")]),t._v("组成。每个事件可用若干监听器，发射事件后，监听器依次调用，事件参数作为回调函数的参数传递。")]),t._v(" "),s("h2",{attrs:{id:"例子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#例子"}},[t._v("#")]),t._v(" 例子")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// test.1.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" events "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'events'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//声明一个事件发生器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" emitter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EventEmitter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为 someEvent 事件注册监听器")]),t._v("\nemitter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'someEvent'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("parm1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" parm2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'listener1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" parm1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" parm2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 触发事件 第一个参数是事件名，第二个之后的参数是监听器参数")]),t._v("\nemitter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'someEvent'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'jack'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1994")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h2",{attrs:{id:"eventemitter-常用-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eventemitter-常用-api"}},[t._v("#")]),t._v(" EventEmitter 常用 API")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("on(eventName,listener)")]),t._v("，为 "),s("code",[t._v("eventName")]),t._v("事件绑定一个监听器；")]),t._v(" "),s("li",[s("code",[t._v("emit(eventName[,arg1,arg2])")]),t._v(" 触发 "),s("code",[t._v("eventName")]),t._v("事件，arg1,arg2 作为监听器的参数；")]),t._v(" "),s("li",[s("code",[t._v("once(eventName,listener)")]),t._v(",单次绑定监听器；")]),t._v(" "),s("li",[s("code",[t._v("removeListener(eventName,listener)")]),t._v("，移除绑定事件；")]),t._v(" "),s("li",[s("code",[t._v("removeAllListener([eventName])")]),t._v("，移除所有监听器。")])]),t._v(" "),s("p",[t._v("我们不会直接用 EventEmitter，而是用它的继承对象。比如 fs、net、http 等，只要支持事件响应的核心模块，都是 "),s("code",[t._v("EventEmitter")]),t._v("的子类。")]),t._v(" "),s("h3",{attrs:{id:"这么设计的原因"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#这么设计的原因"}},[t._v("#")]),t._v(" 这么设计的原因")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("具体功能的对象")]),t._v("实现事件，更符合语义，事件的监听和发射，应该是是一个对象的方法；")]),t._v(" "),s("li",[t._v("JS 继承机制基于原型，支持多重继承，不会打乱对象原有的继承关系。")])])])}),[],!1,null,null,null);s.default=a.exports}}]);