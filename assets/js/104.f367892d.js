(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{380:function(s,t,a){"use strict";a.r(t);var e=a(10),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"如何使用-gh-pages-部署-vue-应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何使用-gh-pages-部署-vue-应用"}},[s._v("#")]),s._v(" 如何使用 gh-pages 部署 vue 应用？")]),s._v(" "),t("p",[s._v("使用 webpack5 实现了微前端，希望能把这些应用部署到 git-pages, 如何办呢？")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://jackchoumine.github.io/webpack/%E6%A8%A1%E5%9D%97%E8%81%94%E9%82%A6%E5%AE%9E%E7%8E%B0%E5%BE%AE%E5%89%8D%E7%AB%AF.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("webpack5 模块联邦实现微前端"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"gh-pages-是什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gh-pages-是什么"}},[s._v("#")]),s._v(" gh-pages 是什么？")]),s._v(" "),t("p",[s._v("gh-pages 是 github 提供给项目、组织等托管静态页面的服务，可使用这项服务托管项目介绍页面、使用文档和组织介绍、个人简历等。")]),s._v(" "),t("h2",{attrs:{id:"如何部署到-gh-pages"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何部署到-gh-pages"}},[s._v("#")]),s._v(" 如何部署到 gh-pages?")]),s._v(" "),t("p",[s._v("安装"),t("code",[s._v("gh-pages")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" gh-pages\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("添加脚本：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"deploy"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gh-pages -d dist"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("code",[s._v("dist")]),s._v("是编译输出目录")]),s._v(" "),t("blockquote",[t("p",[s._v("更多参考")])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/vortesnail/blog/issues/8",target:"_blank",rel:"noopener noreferrer"}},[s._v("如何部署 create-react-app 项目到 Github pages 步骤"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://dev.to/yuribenjamin/how-to-deploy-react-app-in-github-pages-2a1f",target:"_blank",rel:"noopener noreferrer"}},[s._v("How to deploy React App to GitHub Pages"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("还可与 CI CD 工具结合，实现自动部署，相关操作可自行搜索。")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://jackchoumine.github.io/vue3-dashboard/",target:"_blank",rel:"noopener noreferrer"}},[s._v("部署后的效果"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"如何解决切换路由后刷新浏览器-404"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何解决切换路由后刷新浏览器-404"}},[s._v("#")]),s._v(" 如何解决切换路由后刷新浏览器 404 ？")]),s._v(" "),t("p",[s._v("设置两个地方")]),s._v(" "),t("ol",[t("li",[s._v("把仓库名字作为基础路径")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" isProd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'production'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" history "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" isMemoryHistory\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createMemoryHistory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("basePath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createWebHistory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("isProd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/vue3-dashboard'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("undefined")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 生产环境才设置基础路径")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// vue3-dashboard 是项目名字")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("blockquote",[t("p",[s._v("修改基础路径为你仓库名称。")])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("设置自定义错误页面")])]),s._v(" "),t("p",[s._v("添加一个 "),t("code",[s._v("404.html")]),s._v("，内容和 "),t("code",[s._v("index.html")]),s._v("一样当找不到路径时，会渲染 404.html.")]),s._v(" "),t("p",[s._v("每次复制文件也麻烦，我是每次执行部署，脚本执行成功后复制 index.html 为 404.html")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack --config config/webpack.prod.js --progress"')]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postbuild"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cp dist/index.html dist/404.html"')]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"predeploy"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run build"')]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deploy"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gh-pages -d dist"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("其他解决办法：")]),s._v(" "),t("p",[s._v("使用 hash 模式，然后根据这个设置一下 "),t("a",{attrs:{href:"https://siddharam.com.tw/post/20190929/",target:"_blank",rel:"noopener noreferrer"}},[s._v("部署 vue 到 GitHub Pages：404 頁面"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("我没试过，不知道能否成功。")]),s._v(" "),t("p",[s._v("我还试了"),t("a",{attrs:{href:"https://segmentfault.com/a/1190000012951274",target:"_blank",rel:"noopener noreferrer"}},[s._v("单页应用在 gh-pages 动态路由刷新后 404 解决方案"),t("OutboundLink")],1),s._v("，没成功。")]),s._v(" "),t("p",[s._v("更多方法，参考\n"),t("a",{attrs:{href:"https://stackoverflow.com/questions/11577147/how-to-fix-http-404-on-github-pages",target:"_blank",rel:"noopener noreferrer"}},[s._v("How to fix HTTP 404 on Github Pages?"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"react-项目如何解决-404-问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#react-项目如何解决-404-问题"}},[s._v("#")]),s._v(" react 项目如何解决 404 问题？")]),s._v(" "),t("p",[s._v("尝试了 vue 类似的解决办法，没成功，要是你有个更好的办法，感谢告诉我。")])])}),[],!1,null,null,null);t.default=r.exports}}]);